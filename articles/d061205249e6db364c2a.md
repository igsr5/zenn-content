---
title: "Webpackã¨ã¯ã€Webpack + TypeScript + React ã§ç’°å¢ƒæ§‹ç¯‰ã€‘"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['webpack', 'typescript', 'react', 'babel', 'front']
published: true
---
# Webpackã¨ã¯
è¤‡æ•°ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’1ã¤ã«ã¾ã¨ã‚ã¦å‡ºåŠ›ã§ãã‚‹ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ã€‚
loderã‚’ç”¨ã„ã‚‹ã“ã¨ã§jsãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã‚’ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

## åˆ©ç‚¹
- JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±º
    å¾“æ¥ã¯htmlå´ã‹ã‚‰ã®JSãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿é †ã‚’è‡ªèº«ã§è€ƒãˆãªã‘ã‚Œã°ãªã‚‰ãªã‹ã£ãŸã€‚Webpackã§ã¯JSãƒ•ã‚¡ã‚¤ãƒ«é–“ã®ä¾å­˜é–¢ä¿‚ã‚’ç§»å‹•ã§è§£æã—ã¦ã€ã¾ã¨ã‚ã¦ãã‚Œã‚‹ã€‚
    [Dependency Graph](https://webpack.js.org/concepts/dependency-graph/)
- èª­ã¿è¾¼ã¿å›æ•°ã‚’æ¸›ã‚‰ã›ã‚‹
1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã‹ã‚‰èª­ã¿è¾¼ã‚€ãŸã‚
- ã‚³ãƒ¼ãƒ‰å¤‰æ›
Node.jsã®ã¿ã§ä½¿ãˆã‚‹è¨˜æ³•ãªã©ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«å¤‰æ›ã§ãã‚‹

## Webpackã§Reactã®ç’°å¢ƒæ§‹ç¯‰
ãƒªãƒã‚¸ãƒˆãƒª: https://github.com/Ichigo-dev/webpack-test-react
### package.jsonã®ä½œæˆ
```
$ npm init -y
```
### webpackã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ npm install -D webpack webpack-cli webpack-dev-server html-webpack-plugin
```
wepackæœ¬ä½“ã€CLIã€é–‹ç™ºç”¨ã‚µãƒ¼ãƒã¨webpackã§ç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã HTMLã‚’å‡ºåŠ›ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³html-webpack-pluginã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
### Babelã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ npm install -D @babel/core @babel/runtime @babel/plugin-transform-runtime @babel/preset-env babel-loader
```
Babelæœ¬ä½“ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ãƒ—ãƒªã‚»ãƒƒãƒˆã®è¨­å®šã€webpackã®ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
### Reactã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ npm install react react-dom
$ npm install -D @babel/preset-react
```
React, React-Dom, Babelã®ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
### Reactã‚¢ãƒ—ãƒªä½œæˆ
`/src`é…ä¸‹ã«é©å½“ãªã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€‚
`index.html`
```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>React App</title>
</head>
<body>
  <div id="app"></div>
</body>
</html>
```
`app.js`
```
import React from 'react';
import ReactDom from 'react-dom';
import HelloWorld from './HelloWorld';

ReactDom.render(
  <React.StrictMode>
    <HelloWorld />
  </React.StrictMode>,
  document.getElementById('app')
);
```
`HelloWorld.jsx`
```
import React from 'react';

const HelloWorld = () => <h1>Hello World!!</h1>;
export default HelloWorld;
```
### Webpackè¨­å®š
webpack.config.jsã‚’ä½œæˆã€‚
```
const path = require("path");
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  mode: "development",
  entry: path.resolve(__dirname, "src/app.js"),
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "app.js",
  },
  resolve: {
    modules: [path.resolve(__dirname, "node_modules")],
    extensions: [".js", ".jsx"],
  },
    module: {
    rules: [
      {
        test: [/\.js$/, /\.jsx$/],
        use: [
          {
            loader: "babel-loader",
            options: {
              presets: ["@babel/preset-env", "@babel/preset-react"],
            },
          },
        ],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname, "src/index.html"),
    }),
  ],
  devServer: {
      contentBase: path.join(__dirname, "dist"),
    },
};
```
è¨­å®šã¨ã—ã¦ã¯webpackã®è¨­å®šã€Babelã®è¨­å®šã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®èª­ã¿è¾¼ã¿ã€é–‹ç™ºã‚µãƒ¼ãƒã®è¨­å®šã€‚
webpackã®å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦distã‚’ä½œæˆã€‚
### ãƒ“ãƒ«ãƒ‰&å®Ÿè¡Œ
```
$ npx webpack serve --config webpack.config.js
```
localhost:8080 ã§ ã€ŒHello World!!ã€ãŒç¢ºèªã§ãã‚‹ã€‚
### TypeScriptã‚’ä½¿ç”¨ã™ã‚‹
```
$ npm install -D typescript ts-loader @babel/preset-typescript @types/react @types/react-dom
```
TypeScriptã¨Webpackã®ãƒ­ãƒ¼ãƒ€ãƒ¼,Babelã®ãƒ—ãƒªã‚»ãƒƒãƒˆ,Reactã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
æ¬¡ã«TypeSriptã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`tsconfig.json`ã‚’ä½œæˆã€‚
```
{
  "compilerOptions": {
    "target": "esnext",
    "jsx": "react",

    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "moduleResolution": "node",
    "esModuleInterop": true,
    "isolatedModules": true,
    "allowSyntheticDefaultImports": true,
  },
  "include": ["src/**/*.ts", "src/**/*.tsx"],
  "exclude": ["node_modules"]
}
```
æ¬¡ã«`webpack.config.js`ã‚’ä¿®æ­£ã™ã‚‹ã€‚
```
const path = require("path");
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  mode: "development",
  entry: path.resolve(__dirname, "src/app.tsx"), // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä¿®æ­£
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "app.js",
  },
  resolve: {
    modules: [path.resolve(__dirname, "node_modules")],
    extensions: [".js", ".ts", ".tsx"], // ts, tsx è¿½åŠ 
  },
    module: {
    rules: [
      {
        test: [/\.ts$/, /\.tsx$/],
        use: [
          {
            loader: "babel-loader",
            options: {
              presets: ["@babel/preset-env", "@babel/preset-react", "@babel/preset-typescript"], // typescriptè¿½åŠ 
            },
          },
          'ts-loader' // ts-loaderè¿½åŠ 
        ],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname, "src/index.html"),
    }),
  ],
};
```
`src/*.js`=>`src/*.tsx`ã«æ›´æ–°ã€‚
`app.tsx`
```
import * as React from "react";
import ReactDOM from "react-dom";
import HelloWorld from "./HelloWorld";

ReactDOM.render(
  <React.StrictMode>
    <HelloWorld />
  </React.StrictMode>,
  document.getElementById("app")
);
```
`HelloWorld.tsx`
```
import * as React from "react";

const HelloWorld: React.FC = () => <h1>Hello World!!</h1>;

export default HelloWorld;
```
ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚

## å‚è€ƒ
https://webpack.js.org/b  
https://enjoyworks.jp/tech-blog/6889
https://enjoyworks.jp/tech-blog/7337
